#!/usr/bin/env php
<?php

if ($argc < 2) { // Проверяем наличие хотя бы одного аргуента
  
  exit("Отсутствует сумма для расчёта\n");

}

if (!is_numeric($sum = $argv[1])) { // Проверяем, что имеющийся аргумент – это число
  
  exit("Введено не числовое значение\n");
  
}
  
require(__DIR__.'/app/const.php'); // Подключаем файл с массивом купюр
require(__DIR__.'/app/functions.php'); // Подключаем файл с функцией

$bills = BILLS;
arsort($bills); // Сортируем по убыванию массив купюр

foreach ($bills as $id => $bill) { // Формируем ассоциативный массив, где значение ключа соответствует следующей меньшей купюре, т.е. у 500 – 100, у 100 – 50 и т.д.
  if (isset($bills[$id-1])) {
    $calc_bills[$bill] = $bills[$id-1];
  } else {
    $calc_bills[$bill] = null;
  }
}
$bills = $calc_bills;
unset($calc_bills);

calcBills(array_key_first($bills),$sum); // Рекурсивно проходим сумму от самой большой купюры и всей суммы

printf("Введена неверная сумма\n"); // Если дошли до этого момента – значит сумму  разложить не удалось
